# 函数


## 定义函数

完整格式 (关键词 `定义`, `参数`, `泛型`):

```
定义名称(返回类型), 参数列表, 泛型列表:
  # 函数体
```

其中返回类型, 参数, 泛型都是可选的。

+ 没有返回值, 不使用泛型:

  ```
  定义名称, 参数列表:
    # 函数体
  ```

+ 没有参数:

  ```
  定义名称:
    # 函数体
  ```

比如:

```
定义测试(文本), 参数自己(T)、东西(文本), 泛型T:
  # 函数体
```

多个参数, 多个泛型, 之间使用 `、` (顿号) 分隔。

每个参数都必须标注类型。


## 函数返回

关键词 `返回`。

+ 自动返回, 比如:

  ```
  定义后继(数字), 参数值(数字):
    值 + 1
  ```

  函数最后一个表达式的值自动返回。

+ 提前返回, 比如:

  ```
  定义测试(数字):
    返回 6。  # 提前返回

    5  # 不会返回这个
  ```

  没有返回值的提前返回:

  ```
  定义测试:
    返回。  # 此处
  ```


## 函数的重载和覆盖

函数具有特殊的命名空间:

+ 函数的重载:
  多个不同类型 (参数不同) 的函数可以共享相同的函数名称,
  调用函数时, 编译器自动根据所需类型选择相应的函数。

  不同的参数个数, 不同的参数类型, 不同的返回值类型,
  都可以构成函数重载。

+ 函数可以和数据类型具有相同的名称。

+ 函数的覆盖:
  如果两个函数具有相同的类型 (参数类型和返回类型), 以及相同的名称,
  那么后定义的函数将覆盖先定义的函数。

  在后定义的函数定义位置之前, 使用先定义的函数。
  在后定义的函数定义位置之后, 使用后定义的函数。


## 调用函数

+ 没有参数, 比如:

  ```
  定义问好:
    # 函数体

  问好。  # 调用
  ```

  直接使用函数名称调用函数。

+ 有参数, 比如:

  ```
  定义绘制矩形, 参数长(数字)、宽(数字):
    # 函数体

  绘制矩形 2、3。  # 调用
  ```

  多个传递的参数之间使用 `、` (顿号) 分隔。

+ 不调用函数, 比如:

  ```
  定义测试:
    # 函数体

  定义变量不调用, (测试)。  # 将函数存储在变量里
  ```

  使用 `(` `)` (小括号) 直接包裹函数名称, 表示取函数本身, 而不是调用。

### 链式调用

逗号语句。

+ **主-谓** 语法 (主谓宾)

  比如:

  ```
  定义变量次数(数字), 2。

  定义增加(数字), 参数原值(数字):
    原值 + 1

  次数增加。  # 相当于 `增加次数`
  ```

  如果函数的第一个参数的类型和变量的类型相同,
  代码 `变量名函数名` 相当于调用函数, 同时将变量作为函数的第一个参数传递。

  函数的其余参数需要手动传递 (宾), 比如:

  ```
  定义变量计数, 5。

  定义增加, 参数原值(数字)、变动(数字):
    输出(原值 + 变动)。

  计数增加 3。  # 8
  ```

+ 链式调用: 将前一个表达式的值作为下一个表达式的 **主**语 部分。

  比如:

  ```
  定义加(数字), 参数左(数字)、右(数字):
    左 + 右

  定义乘(数字), 参数左(数字)、右(数字):
    左 * 右

  定义数值, 1。

  # 测试
  数值加 1, 乘 2, 加 3, 乘 4。  # 相当于 (((1 + 1) * 2) + 3) * 4

  数值, 加 1, 乘 2, 加 3, 乘 4。  # 这样写也可以
  ```


## 标记语法

函数定义可以使用多种标记, 比如:

```
定义输出, 参数东西(文本), 标记内部。
```


## 函数类型

函数对应的数据类型。

比如:

```
定义计算(数字), 参数体积(数字)、质量(数字):
  # 函数体
```

对应的类型是:

```
函数(数字, 数字、数字)
```

+ 格式:

  ```
  函数(返回类型, 参数类型列表)
  ```

+ 如果没有返回值, 比如:

  ```
  定义输出, 参数东西(文本):
    # 函数体
  ```

  对应的类型是:

  ```
  函数(文本)
  ```

+ 没有参数, 但是有返回值, 比如:

  ```
  定义加载配置(文本):
    # 函数体
  ```

  对应的类型是:

  ```
  函数(文本,)
  ```


## 函数的闭包

类似于 月兔 (moonbit) 的闭包 (closure)。

TODO
