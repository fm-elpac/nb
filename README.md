# 歧语言 (文档)
<https://github.com/fm-elpac/nb>

镜像:
TODO

无歧义中文编程语言, 简称 **歧语言** (nb_lang)。

No amBiguous Chinese programming language, short as NB.


## 主要特点

+ 基于中文的语法设计, 无空格语法。

  现代汉语, 简体中文 (`zh_CN`)

+ 语言设计参考:
  - [python](https://www.python.org/)
  - [月兔 (moonbit)](https://www.moonbitlang.cn/)
  - [rust](https://www.rust-lang.org/)
  - js

+ 使用的底层技术:
  - [WebAssembly (wasm)](https://webassembly.org/)
  - [月兔 (moonbit)](https://www.moonbitlang.cn/)


## 栗子 (example)

+ `第一个程序.歧`

  ```
  输出 666。
  ```

+ `循环.歧`

  ```
  # 这是注释

  循环 3 次:
    写 6。

  换行。
  ```

+ `吃货.歧`

  ```
  定义类型吃货:
    名字(文本)。

  定义吃, 参数自己(吃货)、东西(文本):
    输出 "\(自己的名字)吃了\(东西)"。

  # 测试
  定义变量窝, 吃货。  # 窝是吃货 ^_^
  窝的名字是 "喵喵"。

  定义变量饭, "汤面条"。

  窝吃饭。  # 喵喵吃了汤面条
  ```


## 常见问题 (FAQ)

+ 为什么选择中文编程 ?

  希望可以提高代码的可读性, 降低编程的学习难度, 让更多的中国人能够编程。

+ 为什么选择 WebAssembly ?

  - 开放标准, 较好的生态与工具支持:
    WebAssembly 是 web 技术 (标准) 的一部分, 被广泛支持和使用。
    多种编程语言的代码可以编译成 WebAssembly 运行。
    有许多相关的工具可以使用。

  - 优秀的跨平台能力, 实现一次编译到处运行:
    几乎所有的硬件设备 (单片机等资源特别少的硬件除外),
    CPU, 操作系统, 运行环境等都能运行 WebAssembly。
    包括手机, 台式机 (PC), 服务器 (云端) 等。
    运行环境有浏览器 (比如 chrome), wasmer, deno, node.js 等。

  - 较高的性能:
    WebAssembly 的运行速度接近原生二进制代码 (native C/C++)。

+ 为什么选择 月兔 ?

  歧语言的实现方式为编译成月兔代码。

  - 月兔是国产编程语言, 开源, 更适合中文编程的理念。

  - 月兔能够编译成 WebAssembly 或 js, 能够在很广泛的设备/环境中运行。

  - 月兔在编译生成代码的大小 (越小越好) 和运行速度 (越快越好) 方面,
    表现十分优秀。

  - 强大的语言能力, 类似 rust 的语言设计:
    自动内存管理 (GC), 闭包 (closure), 枚举 (enum), 模式匹配 (match) 等。

  - 更好的生态以及编译工具:
    歧语言本身没什么生态, 借助月兔可以缓解生态问题。
    如果歧语言从头开发编译工具, 很难达到月兔的水平。

+ 为什么推荐使用 双拼 输入法 ?

  - 相比全拼, 双拼可以显著减少击键次数, 加快输入速度。

  - 相比五笔, 双拼的学习难度显著更低。
    双拼只比全拼难一点, 通常在一年内即可熟练掌握。

  - 双拼的一个大问题, 是存在许多种不同的双拼方案。
    在此推荐使用 自然码 方案, 因为自然码的支持很广泛,
    各种操作系统基本都内置了对自然码的支持。


## 主要组件

+ 歧编 (nbc): 歧语言编译器

+ 歧格 (nbf): 代码格式化工具

+ 标准库 (libnb): 歧语言标准库

+ 歧服 (nbs): 歧语言 LSP 服务器

+ 歧测 (ntr): 歧语言测试框架 (Nb Test fRamework)


## 语言设计

### 内置数据类型

#### 简单数据类型

| 名称 | 默认值 | 说明 | 备注 |
| :--- | -----: | :--- | :--- |
| `u1` `二` | 0 | 无符号 1 位二进制整数 | (1) |
| `u8` | 0 | 无符号 8 位二进制整数 | |
| `u16` | 0 | 无符号 16 位二进制整数 | |
| `u32` | 0 | 无符号 32 位二进制整数 | |
| `u64` | 0 | 无符号 64 位二进制整数 | |
| `u128` | 0 | 无符号 128 位二进制整数 | (2) |
| `i8` | 0 | 有符号 8 位二进制整数 | |
| `i16` | 0 | 有符号 16 位二进制整数 | |
| `i32` | 0 | 有符号 32 位二进制整数 | |
| `i64` | 0 | 有符号 64 位二进制整数 | |
| `i128` | 0 | 有符号 128 位二进制整数 | (2) |
| `f32` | 0 | 32 位浮点数 | |
| `f64` | 0 | 64 位浮点数 | |
| `整数` | 0 | 自动类型整数, 默认为 `i32` | |
| `实数` | 0 | 自动类型浮点数, 默认为 `f64` | |
| `数字` | 0 | 自动类型数字, 可以是整数也可以是浮点数 | |
| `文本` | "" | utf-8 字符串, 默认值为长度为 0 的字符串 (空字符串) | |

注:

+ (1) 只有 0 和 1 这两个取值, 相当于别的编程语言的布尔类型。

+ (2) 部分编译模式下不支持。

#### 复合数据类型

| 名称 | 默认值 | 说明 | 备注 |
| :--- | -----: | :--- | :--- |
| `数组` | [] | 有顺序的多个同类型数据 | 类似 array / list |
| `集合` | [] | 无顺序的多个同类型数据 | 类似 set |
| `字典` | {} | 键值对的集合 | 类似 map / dict |

### 特殊字符

这些字符会被词法分析 (token) 特殊处理:

| 数值 | 字符 | 说明 | 备注 |
| :--- | :--- | :--- | :--- |
| 0x0a | `\n` (换行) | 分隔不同的文本行 | |
| 0x20 | ` ` (空格) | 行首缩进, 以及代码中的空白 (解决歧义: 手动分词) | |
| 0x22 | `"` | 双引号: 用于字符串 | |
| 0x23 | `#` | 注释 | |
| 0x28 | `(` | 小括号: 用于多种语法 | |
| 0x29 | `)` | 小括号: 用于多种语法 | |
| 0x2c | `,` | 逗号: 用于多种语法 | |
| 0x3a | `:` | 冒号: 用于代码块, 字典 | |
| 0x3d | `=` | 等号: 用于赋值语句 | |
| 0x5b | `[` | 中括号: 用于数组及下标访问 | |
| 0x5c | `\` | 反斜杠: 字符串转义 | |
| 0x5d | `]` | 中括号: 用于数组及下标访问 | |
| 0x60 | \` | 反引号: 用于解决歧义 (禁止分词) | |
| 0x7b | `{` | 大括号: 用于字典 | |
| 0x7d | `}` | 大括号: 用于字典 | |
| 0x3001 | `、` | 顿号: 用于分隔多个项目 | |
| 0x3002 | `。` | 句号: 用于结束语句 | |
| 0x30 ~ 0x39 0x2e 0x5f | `0` ~ `9` `.` `_` | 用于数字 | |

源代码中禁止出现的 Unicode 字符: TODO

### 关键词

#### 语句关键词

在语句中使用的关键词。

| 关键词 | 说明 | 备注 |
| :----- | :--- | :--- |
| `的` | 访问成员变量 | |
| `是` | 赋值语句 | |

#### 行首关键词

只在行首使用的关键词。

| 关键词 | 说明 | 备注 |
| :----- | :--- | :--- |
| `定义` | 定义函数 | |
| `定义类型` | 定义新的数据类型 (结构体) | |
| `定义枚举` | 枚举 | |
| `定义变量` | 定义变量 | |
| `定义常量` | 定义不可变变量 | |
| `设` | 定义变量并赋值 | 比如 `设 x = 1` |
| `导入` | 导入别的模块的东西 | 类似 js |
| `导出` | 导出本模块的东西 | 类似 js |
| `返回` | 函数返回 | 类似 `return`|
| `循环` | 循环语句 | |
| `破` | 跳出当前循环 | 类似 `break` |
| `破 0` | 提前结束本次循环, 继续下一次循环 | 类似 `continue` |
| `若` | 分支语句 | 类似 `if` |
| `另` | 分支语句 | 类似 `else` |
| `另若` | 分支语句 | 类似 `else if`|
| `匹配` | 分支语句: 模式匹配 | 类似 `match` |

#### 条件关键词

在特定条件下作为关键词。

| 关键词 | 说明 | 备注 |
| :----- | :--- | :--- |
| `参数` | 函数的参数列表 | |
| `标记` | 标记语法 | |
| `泛型` | 泛型 | |
| `次` | 循环语句: 指定循环次数 | |
| `至` | 循环语句: 范围循环 (不包括结束值) | |
| `到` | 循环语句: 范围循环 (包括结束值) | |
| `步长` | 循环语句: 范围循环 (指定步长) | |
| `变量` | 循环语句: 设置循环变量 | |
| `全部` | 导入/导出全部 | |


## LICENSE

[`CC-BY-SA 4.0+`](https://creativecommons.org/licenses/by-sa/4.0/)

本仓库的内容使用 创意共享-署名-相同方式共享 (CC-BY-SA 4.0) 许可证 (LICENSE).
This repository is released under Creative Common (CC-BY-SA 4.0) license.
